<VirtualHost *:80>
  ServerName <%= scope.lookupvar("nodepool::launcher::vhost_name") %>

  ErrorLog /var/log/<%= scope.lookupvar("httpd::params::apache_name") %>/nodepool_error.log
  LogLevel warn
  CustomLog /var/log/<%= scope.lookupvar("httpd::params::apache_name") %>/nodepool_access.log combined
  ServerSignature Off

  <IfModule mod_deflate.c>
      SetOutputFilter DEFLATE
  </IfModule>

  RewriteEngine on
  RewriteRule ^/image-list$ http://127.0.0.1:8005/image-list [P]
  RewriteRule ^/dib-image-list$ http://127.0.0.1:8005/dib-image-list [P]
  RewriteRule ^/image-list.json$ http://127.0.0.1:8005/image-list.json [P]
  RewriteRule ^/dib-image-list.json$ http://127.0.0.1:8005/dib-image-list.json [P]

</VirtualHost>
